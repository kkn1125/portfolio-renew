var E=Object.defineProperty;var x=(n,e,t)=>e in n?E(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var h=(n,e,t)=>(x(n,typeof e!="symbol"?e+"":e,t),t),C=(n,e,t)=>{if(!e.has(n))throw TypeError("Cannot "+t)};var p=(n,e,t)=>{if(e.has(n))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(n):e.set(n,t)};var s=(n,e,t)=>(C(n,e,"access private method"),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const c of o.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function t(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(r){if(r.ep)return;r.ep=!0;const o=t(r);fetch(r.href,o)}})();const L=({name:n=""})=>`
	<div>
	home ${n}
	</div>
`,O=()=>`
	<div>not found</div>
`,S=[{name:"home",path:"/",page:L},{name:"404",path:"/404",page:O}];class b{to(e){history.pushState({},"",e),window.dispatchEvent(new HashChangeEvent("pagechange",{name:"test"}))}back(e=1){currentPage.index-1<0||(currentPage.index=currentPage.index-1,currentPage.page=pages[currentPage.index-1])}forward(e=1){currentPage.index+1>pages.length||(currentPage.index=currentPage.index+1,currentPage.page=pages[currentPage.index+1])}}const v=()=>document.querySelector("#app"),u=[],i={index:0,page:null},A=n=>n??"",j=n=>n??{},F=n=>n??(()=>{}),M=n=>Object.fromEntries(Object.entries(n).map(([e,t])=>[e,e.includes("Load")?F(t):e.includes("props")?j(t):A(t)]));var d,m,l,P,f,y,g,w;class N{constructor(){p(this,d);p(this,l);p(this,f);p(this,g);h(this,"firstPage",!1);(function(){var e=history.pushState,t=history.replaceState;history.pushState=function(a){e.apply(history,arguments),window.dispatchEvent(new CustomEvent("pushstate")),window.dispatchEvent(new CustomEvent("pagechange",{detail:{path:location.pathname,props:history.state}}))},history.replaceState=function(a){t.apply(history,arguments),window.dispatchEvent(new CustomEvent("replacestate")),window.dispatchEvent(new CustomEvent("pagechange",{detail:{path:location.pathname,props:history.state}}))},window.addEventListener("popstate",function(a){window.dispatchEvent(new CustomEvent("pagechange",{detail:{path:location.pathname,props:history.state}}))})})(),window.addEventListener("load",e=>{console.log(2,e),s(this,d,m).call(this,location.pathname,{})}),window.addEventListener("pagechange",({detail:e})=>{console.log("page change");const{path:t,props:a}=e;s(this,d,m).call(this,t,a)})}setPage(e){this.firstPage||(this.firstPage=!0,i.index=0,i.page=e),u.push(s(this,l,P).call(this,e))}setPages(e){for(let t of e)this.setPage(t);console.log(i),console.log(u)}render(e={}){var t;if(i.page)s(this,f,y).call(this),s(this,g,w).call(this,i.page.page(e));else throw s(this,g,w).call(this,(t=u.find(a=>a.name==="404"))==null?void 0:t.page(e)),new Error("페이지가 없습니다.")}}d=new WeakSet,m=function(e,t){const a=u.findIndex(r=>r.path===e);i.index=a,i.page=u[a],this.render(t)},l=new WeakSet,P=function({name:e,path:t,page:a,props:r,preLoad:o,afterLoad:c}){return M({name:e,path:t,page:a,props:r,preLoad:o,afterLoad:c})},f=new WeakSet,y=function(){v().innerHTML=""},g=new WeakSet,w=function(e){const t=new DOMParser().parseFromString(e,"text/html");v().append(...Array.from(t.body.children))};class H{constructor(){h(this,"router",new N);h(this,"navigator",new b)}}const T=new H;T.router.setPages(S);
